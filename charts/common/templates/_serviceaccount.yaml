{{/*
Create a ServiceAccount if serviceAccount.create is true

Usage:
{{ include "common.serviceAccount" . }}

Params:
  - .Values.serviceAccount.create - Boolean - Required. Whether a service account should be created
  - .Values.serviceAccount.name - String - Optional. The name of the service account to use. If not set and create is true, a name is generated using the fullname template
    If not set and create is false, "default" is used.

*/}}
{{- define "common.serviceAccount" -}}
{{- if .Values.serviceAccount.create -}}
apiVersion: v1
kind: ServiceAccount
metadata:
  name: {{ include "common.serviceAccountName" . }}
  labels:
    {{- include "common.labels" . | nindent 4 }}
  {{- with .Values.serviceAccount.annotations }}
  annotations:
    {{- toYaml . | nindent 4 }}
  {{- end }}
{{- end }}
---
{{- end -}}
