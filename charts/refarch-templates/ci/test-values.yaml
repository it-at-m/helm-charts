modules:
  - name: frontend
    image:
      repository: ghcr.io/it-at-m/refarch-templates/refarch-frontend
      tag: "latest"
    service:
      http: true
  - name: webcomponent
    image:
      repository: ghcr.io/it-at-m/refarch-templates/refarch-webcomponent
      tag: "latest"
    service:
      http: true
# Commented out because backend currently cannot be tested publicly without DB connection
#  - name: backend
#    image:
#      repository: ghcr.io/it-at-m/refarch-templates/refarch-backend
#      tag: "latest"
#    applicationYML:
#      spring:
#        profiles:
#          active: "no-security"
#    service:
#      http: true
  - name: eai
    image:
      repository: ghcr.io/it-at-m/refarch-templates/refarch-eai
      tag: "latest"
    service:
      http: true

# Sample Gateway configuration, which is enabled by default. For further configuration option view the chart dependency on https://github.com/it-at-m/helm-charts/tree/main/charts/refarch-gateway
refarch-gateway:
  envAppend:
    - name: SPRING_PROFILES_ACTIVE
      value: "hazelcast-k8s"
  applicationYML:
    spring:
      cloud:
        gateway:
          routes:
            # The catch all route needs to be stand at the end.
            - id: "frontend"
              uri: "http://myrelease-frontend:8080/"
              predicates:
                - "Path=/**"
    # OpenShift-specific configuration, if you have plain Kubernetes, you will need to change the annotations, className.
    # annotations:
    #   route.openshift.io/termination: "edge"
    # className: openshift-default
  volumes:
    cacertsVolume:
      - name: cacerts-volume
        secret:
          defaultMode: 420
          secretName: cacerts-lhm
          items:
            - key: cacerts-lhm
              path: cacerts
  volumeMounts:
    cacertsVolumeMount:
      - mountPath: /etc/pki/ca-trust/extracted/java
        name: cacerts-volume
        readOnly: true
