# java-spring-boot

## Introduction

This chart bootstraps a generic Java / Spring Boot application deployment on a [Kubernetes](http://kubernetes.io) cluster using the [Helm](https://helm.sh) package manager.

## Installing the Chart

As this is a "generic" chart, make sure you configure at least the image (`image.repository` and `image.tag`, see [Configuration](#configuration)) you want to rollout.

Then proceed to install this chart using:

```bash
helm install my-app-release it-at-m/java-spring-boot --values values.yaml
```

The command deploys your application on the Kubernetes cluster with minimal configuration. The [Configuration](#configuration) section lists the parameters that can be configured during installation.

## Configuration

| Key                                        | Type    | Default                                                                                                                                                           | Description                                                                                                                                                    |
| ------------------------------------------ | ------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| replicaCount                               | int     | `1`                                                                                                                                                               | replicaset count                                                                                                                                               |
| revisionHistoryLimit                       | int     | `10`                                                                                                                                                              | number of old history to retain to allow rollback                                                                                                              |
| deploymentStrategy                         | object  | <code>&nbsp;&nbsp;type:&nbsp;&nbsp;RollingUpdate<br>&nbsp;&nbsp;rollingUpdate: {}<br></code>                                                                      | Deployment strategy, default `RollingUpdate`                                                                                                                   |
| image.imagePullSecrets                     | list    | `[]`                                                                                                                                                              | Image pull secrets specification                                                                                                                               |
| image.pullPolicy                           | string  | `"IfNotPresent"`                                                                                                                                                  | Image pull policy                                                                                                                                              |
| image.repository                           | string  | `""`                                                                                                                                                              | Image to use for deploying, required                                                                                                                           |
| image.tag                                  | string  | `""`                                                                                                                                                              | Image tag, required                                                                                                                                            |
| nameOverride                               | string  | `""`                                                                                                                                                              | Override chart name                                                                                                                                            |
| fullnameOverride                           | string  | `""`                                                                                                                                                              | Override fullname                                                                                                                                              |
| serviceAccount.create                      | bool    | `true`                                                                                                                                                            | Create service account                                                                                                                                         |
| serviceAccount.automount                   | bool    | `true`                                                                                                                                                            | Automatically mount the ServiceAccount's API credentials                                                                                                       |
| serviceAccount.annotations                 | object  | `{}`                                                                                                                                                              | Service account annotations                                                                                                                                    |
| serviceAccount.name                        | string  | `""`                                                                                                                                                              | Service account name. If not set and create is true, a name is generated using the fullname template                                                           |
| podAnnotations                             | object  | `{}`                                                                                                                                                              | Pod annotations                                                                                                                                                |
| podLabels                                  | object  | `{}`                                                                                                                                                              | Pod labels                                                                                                                                                     |
| podSecurityContext                         | object  | `{}`                                                                                                                                                              | Pod Security Context                                                                                                                                           |
| securityContext                            | object  | `{}`                                                                                                                                                              | Security Context                                                                                                                                               |
| service.port                               | int     | `8080`                                                                                                                                                            | Service port                                                                                                                                                   |
| service.type                               | string  | `"ClusterIP"`                                                                                                                                                     | Service type                                                                                                                                                   |
| ingress.enabled                            | bool    | `false`                                                                                                                                                           | Enable ingress                                                                                                                                                 |
| ingress.annotations                        | object  | `{}`                                                                                                                                                              |                                                                                                                                                                |
| ingress.className                          | string  | `""`                                                                                                                                                              |                                                                                                                                                                |
| ingress.hosts                              | list    | `[]`                                                                                                                                                              |                                                                                                                                                                |
| ingress.tls                                | list    | `[]`                                                                                                                                                              |                                                                                                                                                                |
| resources.requests.cpu                     | string  | `"50m"`                                                                                                                                                           | CPU resource request                                                                                                                                           |
| resources.requests.memory                  | string  | `"750Mi"`                                                                                                                                                         | Memory resource request                                                                                                                                        |
| resources.limits.cpu                       | string  | `"500m"`                                                                                                                                                          | CPU resource limit                                                                                                                                             |
| resources.limits.memory                    | string  | `"750Mi"`                                                                                                                                                         | Memory resource limit                                                                                                                                          |
| livenessProbe                              | object  | <code>httpGet:<br>&nbsp;&nbsp;path: /actuator/health/liveness<br>&nbsp;&nbsp;port: http<br>timeoutSeconds: 15<br>periodSeconds: 10<br>failureThreshold: 5</code>  | Liveness probe                                                                                                                                                 |
| readinessProbe                             | object  | <code>httpGet:<br>&nbsp;&nbsp;path: /actuator/health/readiness<br>&nbsp;&nbsp;port: http<br>timeoutSeconds: 15<br>periodSeconds: 10<br>failureThreshold: 5</code> | Readiness probe                                                                                                                                                |
| startupProbe                               | object  | <code>httpGet:<br>&nbsp;&nbsp;path: /actuator/health/liveness<br>&nbsp;&nbsp;port: http<br>timeoutSeconds: 5<br>periodSeconds: 10<br>failureThreshold: 30</code>  | Startup probe                                                                                                                                                  |
| autoscaling.enabled                        | bool    | `false`                                                                                                                                                           | Enables Horizontal Pod Autoscaling (HPA)                                                                                                                       |
| autoscaling.minReplicas                    | int     | `1`                                                                                                                                                               | HPA minimum replicas                                                                                                                                           |
| autoscaling.maxReplicas                    | int     | `5`                                                                                                                                                               | HPA maximum replicas                                                                                                                                           |
| autoscaling.targetCPUUtilizationPercentage | int     | `80`                                                                                                                                                              | HPA target cpu utilization percentage                                                                                                                          |
| volumes                                    | list    | `[]`                                                                                                                                                              | Extra volumes                                                                                                                                                  |
| volumeMounts                               | list    | `[]`                                                                                                                                                              | Extra volumeMounts for the pods                                                                                                                                |
| imageWorkDir                               | string  | `"/deployments"`                                                                                                                                                  | Working directory of the image / executed java application.                                                                                                    |
| envVars                                    | object  | `{}`                                                                                                                                                              | Extra environment variables                                                                                                                                    |
| envFrom                                    | object  | `{}`                                                                                                                                                              | Additional environment variables from secrets or configmaps via(`envFrom`)                                                                                     |
| applicationYml                             | string  | `""`                                                                                                                                                              | configures application.yml content that get mounted on the output Deployment definition. Helm template functions are supported.                                |
| javaTruststore.enabled                     | boolean | `true`                                                                                                                                                            | enables mounting a java truststore containing additional certificates                                                                                          |
| javaTruststore.secretName                  | string  | `"cacerts-lhm"`                                                                                                                                                   | custom secret name containing the java truststore                                                                                                              |
| javaTruststore.secretKey                   | string  | `"cacerts-lhm"`                                                                                                                                                   | custom key in the secreat that contains the java truststore file                                                                                               |
| javaTruststore.mountPath                   | string  | `"/etc/pki/ca-trust/extracted/java"`                                                                                                                              | mount path for the truststore (filename `cacerts`)                                                                                                             |
| routes                                     | object  | `{}`                                                                                                                                                              | OpenShift Route definitions (see default `values.yaml` for examples)                                                                                           |
| credentials                                | object  | `{}`                                                                                                                                                              | Configures additional secrets that will get mounted as additional volumes, containing spring configuration properties. See default `values.yaml` for examples. |
| initContainers                             | object  | `{}`                                                                                                                                                              | Extra initContainers for the pods                                                                                                                              |
| serviceMonitor.enabled                     | bool    | `false`                                                                                                                                                           | Enables creation of a ServiceMonitor                                                                                                                           |
| serviceMonitor.path                        | string  | `"/actuator/prometheus"`                                                                                                                                          | path of the metrics/prometheus endpoint                                                                                                                        |
| build.enabled                              | bool    | `false`                                                                                                                                                           | enables the creation of a BuildConfig + ImageStream to perform "binary" S2I-Builds                                                                             |
| build.builderImageStreamName               | string  | `"ubi9-openjdk-21"`                                                                                                                                               | S2I Builder image name                                                                                                                                         |
| build.builderImageStreamTag                | string  | `"latest"`                                                                                                                                                        | S2I Builder image tag                                                                                                                                          |
| build.builderImageStreamNamespace          | string  | `"openshift"`                                                                                                                                                     | S2I Builder image namespace                                                                                                                                    |
| build.outputImageStreamName                | string  | `""`                                                                                                                                                              | name of the (output) imagestream, required                                                                                                                     |
| build.outputImageStreamTag                 | string  | `"latest"`                                                                                                                                                        | tag of output image                                                                                                                                            |
