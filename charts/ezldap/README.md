# ezLDAP

## Introduction

This chart bootstraps an [ezLDAP](https://github.com/it-at-m/ezLDAP) deployment on a [Kubernetes](http://kubernetes.io) cluster using the [Helm](https://helm.sh) package manager.

## Installing the Chart

Install this chart using:

```bash
helm install my-ezldap-release it-at-m/ezldap --values values.yaml
```

The command deploys ezLDAP on the Kubernetes cluster with some default configuration. The [Configuration](#configuration) section lists the parameters that can or **must** be configured during installation.

## Configuration

| Key                                        | Type   | Default          | Description                                                                                                                                                                                                                                                |
| ------------------------------------------ | ------ | ---------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| image.imagePullSecrets                     | list   | `[]`             | Image pull secrets specification                                                                                                                                                                                                                           |
| image.pullPolicy                           | string | `"IfNotPresent"` | Image pull policy                                                                                                                                                                                                                                          |
| image.repository                           | string | `"itatm/ezldap"` | Image to use for deploying                                                                                                                                                                                                                                 |
| image.tag                                  | string | `""`             | Image tag                                                                                                                                                                                                                                                  |
| ingress.annotations                        | object | `{}`             |                                                                                                                                                                                                                                                            |
| ingress.className                          | string | `""`             |                                                                                                                                                                                                                                                            |
| ingress.enabled                            | bool   | `false`          | Enable ingress                                                                                                                                                                                                                                             |
| ingress.hosts                              | list   | `[]`             |                                                                                                                                                                                                                                                            |
| ingress.tls                                | list   | `[]`             |                                                                                                                                                                                                                                                            |
| nameOverride                               | string | `""`             | Override chart name                                                                                                                                                                                                                                        |
| podSecurityContext                         | object | `{}`             | Security Context                                                                                                                                                                                                                                           |
| service.annotations                        | object | `{}`             | Service annotations                                                                                                                                                                                                                                        |
| service.port                               | int    | `8080`           | Service pot                                                                                                                                                                                                                                                |
| service.type                               | string | `"ClusterIP"`    | Service type                                                                                                                                                                                                                                               |
| serviceAccount.annotations                 | object | `{}`             | Service account annotations                                                                                                                                                                                                                                |
| serviceAccount.create                      | bool   | `true`           | Create service account                                                                                                                                                                                                                                     |
| serviceAccount.name                        | string | `""`             | Service account name                                                                                                                                                                                                                                       |
| credentials.existingSecret **(\*)**        | string | `""`             | Required, must contains keys: [USER_DN, PASSWORD] for LDAP authentication                                                                                                                                                                                  |
| extraEnvVars                               | list   | `[]`             | Extra environment variables                                                                                                                                                                                                                                |
| extraVolumes                               | list   | `[]`             | Extra volumes                                                                                                                                                                                                                                              |
| extraVolumeMounts                          | list   | `[]`             | Extra volumeMounts for the pods                                                                                                                                                                                                                            |
| initContainers                             | list   | `[]`             | Extra initContainers for the pods                                                                                                                                                                                                                          |
| eaiRoute.enabled                           | bool   | `false`          | Creates a additional route                                                                                                                                                                                                                                 |
| eaiRoute.annotations                       | object | `{}`             | Route annotations                                                                                                                                                                                                                                          |
| eaiRoute.host                              | string | `""`             | Route host                                                                                                                                                                                                                                                 |
| eaiRoute.path                              | string | `""`             | Route path                                                                                                                                                                                                                                                 |
| eaiRoute.wildcardPolicy                    | string | `"None"`         | Route wildcard policy                                                                                                                                                                                                                                      |
| eaiRoute.tls.termination                   | string | `"Edge"`         | Route tsl termination                                                                                                                                                                                                                                      |
| eaiRoute.tls.insecureEdgeTerminationPolicy | string | `"Redirect"`     | Route tls insecureEdgeTerminationPolicy                                                                                                                                                                                                                    |
| eaiRoute.tls.key                           | string | `""`             | Route tls key                                                                                                                                                                                                                                              |
| eaiRoute.tls.certificate                   | string | `""`             | Route tls certificate                                                                                                                                                                                                                                      |
| eaiRoute.tls.caCertificate                 | string | `""`             | Route tls ca certificate                                                                                                                                                                                                                                   |
| eaiRoute.tls.destinationCACertificate      | string | `""`             | Route tls destination ca certificate                                                                                                                                                                                                                       |
| eaiRoute.whitelist                         | string | `""`             | Whitelist (space-seperated list of IPs and CIDR ranges) for IP-based [HAProxy Whitelist](https://docs.openshift.com/container-platform/4.9/networking/routes/route-configuration.html#nw-route-specific-annotations_route-configuration) for the EAI route |

**(\*)**: required
